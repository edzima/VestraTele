version: "3.2"
services:
  yii:
    container_name: "vestratele_TEST"
    restart: "always"
    build:
      context: ""
      dockerfile: docker/tests/Dockerfile-tests
    env_file:
      - .env
    ports:
      - "${FRONTEND_PORT}:8080"
    volumes:
      - ./vendor:/var/html/vestra/vendor
      - ./:/var/html/vestra
    working_dir: /var/html/vestra
    networks:
      main:
        aliases:
          - yii
  db_mysql:
    container_name: "vestratele_TEST_DB"
    image: mysql:8.0.16
    restart: always
    environment:
      DB_USERNAME: "${DB_USERNAME}"
      MYSQL_ROOT_PASSWORD: "${MYSQL_ROOT_PASSWORD}"
      DB_PASSWORD: "${DB_PASSWORD}"
      DB_DBNAME: "${DB_DBNAME}"
    volumes:
      - ./docker/development/sql/:/docker-entrypoint-initdb.d/
    ports:
      - "${DB_PORT}:3306"
    expose:
      - "${DB_PORT}"
    networks:
      main:
        aliases:
          - db_mysql

networks:
  main: